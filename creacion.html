<!-- Calculadora Avanzada 2.0 - Tiempo personalizado -->
<div class="proyecto">
  <h2>ðŸ§® Calculadora Inteligente de Ganancias</h2>
  <p>Elige tu moneda, APY y el tiempo exacto (horas, dÃ­as o aÃ±os) para ver tu rendimiento.</p>

  <!-- Selector de moneda -->
  <div class="form-group">
    <label for="moneda-2">Moneda:</label>
    <select id="moneda-2">
      <option value="USDT">USDT</option>
      <option value="BNB">BNB</option>
      <option value="TON">TON</option>
      <option value="SOL">SOL</option>
      <option value="BTC">BTC</option>
      <option value="ETH">ETH</option>
      <option value="Otra">Otra</option>
    </select>
  </div>

  <div class="form-group" id="campo-otra-2" style="display:none;">
    <input type="text" id="otra-moneda-2" placeholder="Ej: CAKE">
  </div>

  <!-- InversiÃ³n y APY -->
  <div class="form-group">
    <label for="inversion-2">InversiÃ³n:</label>
    <input type="number" id="inversion-2" value="1000" step="0.01" min="0">
  </div>

  <div class="form-group">
    <label for="apy-2">APY (% anual):</label>
    <input type="number" id="apy-2" value="48" min="0" max="1000">
  </div>

  <!-- Selector de unidad de tiempo -->
  <div class="form-group">
    <label>Â¿En quÃ© unidad quieres calcular?</label>
    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <button type="button" class="time-btn active" data-unit="hours">ðŸ•’ Horas</button>
      <button type="button" class="time-btn" data-unit="days">ðŸ“… DÃ­as</button>
      <button type="button" class="time-btn" data-unit="years">ðŸ“† AÃ±os</button>
    </div>
  </div>

  <!-- Campo numÃ©rico -->
  <div class="form-group">
    <label for="cantidad-2">Cantidad:</label>
    <input type="number" id="cantidad-2" value="72" min="0.1" step="1">
    <small id="unidad-texto">72 horas = 3 dÃ­as</small>
  </div>

  <button onclick="calcularPersonalizado()">âœ¨ Calcular Ganancia</button>

  <div id="resultado-personalizado" style="margin-top:20px; display:none;">
    <h3>ðŸ“ˆ Resultado en <span id="moneda-res">USDT</span>:</h3>
    <p><strong>Ganancia:</strong> <span id="ganancia-res"></span></p>
    <p><strong>Rendimiento:</strong> <span id="porcentaje-res"></span>%</p>
    <p><strong>Total:</strong> <span id="total-res"></span></p>
  </div>
</div>

<style>
  .time-btn {
    background: #334155;
    color: #e2e8f0;
    border: none;
    padding: 10px 16px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s;
  }
  .time-btn.active {
    background: var(--color-secondary);
    color: var(--bg-dark);
    box-shadow: 0 0 12px rgba(212, 175, 55, 0.4);
  }
  #unidad-texto {
    color: #94a3b8;
    font-size: 0.9em;
  }
</style>

<script>
  // Mostrar campo "Otra moneda"
  document.getElementById('moneda-2').addEventListener('change', function() {
    document.getElementById('campo-otra-2').style.display = this.value === 'Otra' ? 'block' : 'none';
  });

  // Selector de tiempo
  document.querySelectorAll('.time-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      actualizarTextoUnidad();
    });
  });

  function actualizarTextoUnidad() {
    const cantidad = parseFloat(document.getElementById('cantidad-2').value) || 0;
    const unidad = document.querySelector('.time-btn.active').dataset.unit;
    let texto = '';

    if (unidad === 'hours') {
      const dias = (cantidad / 24).toFixed(2);
      texto = `${cantidad} horas = ${dias} dÃ­as`;
    } else if (unidad === 'days') {
      const horas = cantidad * 24;
      texto = `${cantidad} dÃ­as = ${horas} horas`;
    } else {
      const dias = cantidad * 365;
      texto = `${cantidad} aÃ±os = ${dias} dÃ­as`;
    }

    document.getElementById('unidad-texto').innerText = texto;
  }

  document.getElementById('cantidad-2').addEventListener('input', actualizarTextoUnidad);

  function calcularPersonalizado() {
    const inversion = parseFloat(document.getElementById('inversion-2').value);
    const apy = parseFloat(document.getElementById('apy-2').value);
    const cantidad = parseFloat(document.getElementById('cantidad-2').value);
    const unidad = document.querySelector('.time-btn.active').dataset.unit;
    const moneda = document.getElementById('moneda-2').value === 'Otra' 
      ? document.getElementById('otra-moneda-2').value || 'Moneda'
      : document.getElementById('moneda-2').value;

    if (isNaN(inversion) || isNaN(apy) || isNaN(cantidad) || inversion <= 0 || apy < 0 || cantidad <= 0) {
      alert("Ingresa valores vÃ¡lidos.");
      return;
    }

    // Convertir a fracciÃ³n de aÃ±o
    let fraccionAnual;
    if (unidad === 'hours') fraccionAnual = cantidad / (365 * 24);
    else if (unidad === 'days') fraccionAnual = cantidad / 365;
    else fraccionAnual = cantidad;

    // CÃ¡lculo compuesto
    const ganancia = inversion * (Math.pow(1 + apy / 100, fraccionAnual) - 1);
    const porcentaje = (ganancia / inversion) * 100;
    const total = inversion + ganancia;

    // Mostrar resultados
    document.getElementById('moneda-res').innerText = moneda;
    document.getElementById('ganancia-res').innerText = `${ganancia.toFixed(4)} ${moneda}`;
    document.getElementById('porcentaje-res').innerText = porcentaje.toFixed(4);
    document.getElementById('total-res').innerText = `${total.toFixed(4)} ${moneda}`;

    document.getElementById('resultado-personalizado').style.display = 'block';
  }

  // Inicializar
  actualizarTextoUnidad();
</script>
